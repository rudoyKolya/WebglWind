(this["webpackJsonpopenlayers-map"]=this["webpackJsonpopenlayers-map"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),o=n(83),i=n.n(o),c=(n(99),n(23)),l=(n(100),new a.a.createContext),u=n(43),f=n(106),d=n(9),s=n(77);n(107);n(92);var m=n(105);var v=function(e){return new m.a(e)},E=function(e){var t=e.children,n=e.zoom,o=e.center,i=Object(r.useRef)(),m=Object(r.useState)(null),E=Object(c.a)(m,2),b=E[0],g=E[1];return Object(r.useEffect)((function(){var e=new s.a({source:v()});e.on("postrender",(function(e){e.context.globalCompositeOperation="destination-over",e.context.fillStyle="rgba(170, 211, 223, 1)",e.context.fillRect(0,0,e.context.canvas.width,e.context.canvas.height/2),e.context.fillStyle="rgba(242, 239, 233, 1)",e.context.fillRect(0,e.context.canvas.height/2,e.context.canvas.width,e.context.canvas.height/2),e.context.globalCompositeOperation="source-over"}));var t={view:new u.a({projection:Object(d.i)("EPSG:4326"),center:[0,0],zoom:2,maxZoom:10,minZoom:1}),layers:[e],controls:[],overlays:[]},n=new f.a(t);return n.setTarget(i.current),g(n),function(){return n.setTarget(void 0)}}),[]),Object(r.useEffect)((function(){b&&b.getView().setZoom(n)}),[n]),Object(r.useEffect)((function(){b&&b.getView().setCenter(o)}),[o]),a.a.createElement(l.Provider,{value:{map:b}},a.a.createElement("div",{ref:i,className:"ol-map"},t))},b=function(e){var t=e.children;return a.a.createElement("div",null,t)},g=(n(91),function(e,t,n){var r=e.createShader(t);if(!r)return null;if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(r);return console.log(a),e.deleteShader(r),null}return r}),h=function(e,t,n){var r=function(e,t,n){var r=g(e,e.VERTEX_SHADER,t),a=g(e,e.FRAGMENT_SHADER,n);if(!r||!a)return null;var o=e.createProgram();return o?(e.attachShader(o,r),e.attachShader(o,a),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)?o:(e.deleteProgram(o),e.deleteShader(a),e.deleteShader(r),null)):null}(e,t,n);return!!r&&(e.useProgram(r),e.program=r,r)},x=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"webgl",a=e.current.getContext(r);return{gl:a,vertexShaderSource:n,fragmentShaderSource:t,canvas:e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{x:2*Math.random()-1,y:2*Math.random()-1,life:Math.ceil(200*Math.random()),oldPositions:e}},p=function(e,t){return Math.round((e+1)*(t-1)/2)},_=function(e,t,n,r){return{x:p(e,n),y:p(t,r)}},y=n(76),R=n(37),S=n(87),O=n(1),T=Object(S.a)((function(e,t,n){var r=e.length,a=e[0].length,o=Object(c.a)(t,4),i=o[0],l=o[1],u=o[2],f=o[3],d=Object(c.a)(n,4),s=d[0],m=d[1],v=d[2],E=d[3],b=Math.floor((l-m)/(E-m)*r),g=Math.floor((f-m)/(E-m)*r),h=Math.floor((i-s)/(v-s)*a),x=Math.floor((u-s)/(v-s)*a),A=(h%a+a)%a,p=x-h,_=(A+p)%a;if(p>=a||A>_){var y=e.slice(b,g).map((function(e){return e.slice(A)})),S=e.slice(b,g).map((function(e){return e.slice(0,_)}));return y.map((function(e,t){return[].concat(Object(R.a)(e),Object(R.a)(S[t]))}))}return e.slice(b,g).map((function(e){return e.slice(A,_)}))}),(function(e,t){var n=e[1],r=t[1];return Object(O.o)(n,r)})),F=n(78),P=function(e){var t=e.vectorsData,n=Object(r.useContext)(l).map,a=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(n)return function(){a.current&&n.removeLayer(a.current)}}),[t,n]),Object(r.useEffect)((function(){if(n){var e=document.createElement("canvas"),r=x({current:e},"\nprecision mediump float;\nvarying vec4 vColor;\nvoid main() {\n    float r = 0.5;\n    if (distance(gl_PointCoord, vec2(0.5)) > r) {\n        discard;\n    }\n    gl_FragColor = vColor;\n}\n","\nattribute vec2 position;\nattribute vec4 color;\nvarying vec4 vColor;\nvoid main() {\n     gl_Position = vec4(position, 0.0, 1.0);\n     gl_PointSize = 2.0;\n     vColor = color;\n}\n"),o=r.gl,i=r.vertexShaderSource,c=r.fragmentShaderSource;h(o,i,c);var l=[];!function(e){var t=e.getAttribLocation(e.program,"position"),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.vertexAttribPointer(t,2,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),e.enableVertexAttribArray(t);var r=e.getAttribLocation(e.program,"color");e.vertexAttribPointer(r,4,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,2*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(r)}(o),function(e){for(var t=0;t<1e4;)e.push(A()),t+=1}(l);var u=null,f=new y.a({ratio:1,projection:"EPSG:4326",canvasFunction:function(n,r,a,i){u&&cancelAnimationFrame(u),e.width=i[0],e.height=i[1],o.viewport(0,0,e.width,e.height);return function(){var e=T(t,n,[-180,-90,180,90]);!function(e,t,n){e.forEach((function(e){var r={x:e.x,y:e.y};e.life+=1;var a=_(e.x,e.y,n[0].length,n.length),o=a.x,i=a.y,c=n[i][o].r/255*2-1,l=n[i][o].g/255*2-1,u=n[i][o].g/255+n[i][o].r/255;e.life>=300||e.x+c*t*u>1||e.x+c*t*u<-1||e.y+l*t*u>1||e.y+l*t*u<-1?Object.assign(e,A(e.oldPositions)):(e.x+=c*t*u,e.y+=l*t*u,e.oldPositions.unshift(r),e.oldPositions.length>10&&e.oldPositions.pop())}))}(l,.002,e);var r=[];l.forEach((function(t){var n=_(t.x,t.y,e[0].length,e.length),a=n.x,o=n.y,i=e[o][a];r.push(t.x,t.y,i.r/255,i.g/255,0,1),t.oldPositions.forEach((function(t,n){var a=_(t.x,t.y,e[0].length,e.length),o=e[a.y][a.x];r.push(t.x,t.y,o.r/255,o.g/255,0,1-(n+1)/10)}))})),o.bufferData(o.ARRAY_BUFFER,new Float32Array(r),o.DYNAMIC_DRAW),o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE),o.clear(o.COLOR_BUFFER_BIT),o.drawArrays(o.POINTS,0,r.length/6),u=requestAnimationFrame((function(){f.changed()}))}(),e}}),d=new F.a({source:f});a.current=d,n.addLayer(d)}}),[n,t]),null},C=n(80),L=n.n(C),j=n(88),w=n.n(j),B=n(89),N=n.n(B),D=n(90),I=(n(101),function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}),U=function(e){return(e+1)/2},M=function(e){for(var t=new Float32Array(6*e),n=0;n<6*e;n+=6)t.set(Object(R.a)([2*Math.random()-1,2*Math.random()-1,Math.ceil(300*Math.random()),0,0,0]),n);return t},X=function(e,t,n){var r=e.createBuffer(),a=e.createVertexArray();return e.bindVertexArray(a),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,6*t*4,e.DYNAMIC_COPY),n&&e.bufferSubData(e.ARRAY_BUFFER,0,n),e.vertexAttribPointer(0,1,e.FLOAT,!1,24,0),e.vertexAttribPointer(1,1,e.FLOAT,!1,24,4),e.vertexAttribPointer(2,1,e.FLOAT,!1,24,8),e.vertexAttribPointer(3,3,e.FLOAT,!1,24,12),e.enableVertexAttribArray(0),e.enableVertexAttribArray(1),e.enableVertexAttribArray(2),e.enableVertexAttribArray(3),[r,a]},z=function(e,t,n,r){var a=e.createProgram(),o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,t),e.compileShader(o),e.attachShader(a,o);var i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(i,n),e.compileShader(i),e.attachShader(a,i),r&&e.transformFeedbackVaryings(a,r,e.INTERLEAVED_ATTRIBS),e.linkProgram(a),!!e.getProgramParameter(a,e.LINK_STATUS)&&a},V=function(e){var t=e.src,n=e.trailLength,a=e.particlesNumber,o=e.speed,i=Object(r.useRef)(document.createElement("canvas")).current,u=Object(r.useState)(M(a)),f=Object(c.a)(u,2),d=f[0],s=f[1],m=Object(r.useRef)(i.getContext("webgl2")).current,v=Object(r.useRef)(z(m,"#version 300 es\nlayout(location=0) in float ix;\nlayout(location=1) in float iy;\nlayout(location=2) in float iLife;\nlayout(location=3) in float iColor;\nuniform sampler2D u_texture;\n\nout float ox;\nout float oy;\nout float oLife;\nout vec3 oColor;\n\nuniform vec4 u_extent;\nuniform float u_speed;\n\nvec2 getTextureCoord(float normalizedX, float normalizedY) {\n  float newX;\n\n  if (u_extent.x < u_extent.z) {\n    newX = normalizedX;\n  } else {\n    if(normalizedX > u_extent.x) {\n      newX = mix(u_extent.x, 1.0, (normalizedX - u_extent.x) / (1.0 - u_extent.x));\n    } else {\n      newX = mix(0.0, u_extent.z, normalizedX / u_extent.z);\n    }\n  }\n\n  return vec2(newX, normalizedY);\n}\n\nconst vec3 rand_constants = vec3(12.9898, 78.233, 4375.85453);\nfloat random(const vec2 co) {\n  float t = dot(rand_constants.xy, co);\n  return fract(sin(t) * (rand_constants.z + t));\n}\n\nvoid main()\n{\n  float speed = u_speed;\n  float normalizedX;\n  if(u_extent.z <= u_extent.x) {\n    normalizedX = ((ix + 1.0) / 2.0) * (1.0 + u_extent.z - u_extent.x) + u_extent.x;\n    if(normalizedX > 1.0) normalizedX -= 1.0;\n  } else {\n    normalizedX = ((ix + 1.0) / 2.0) * (u_extent.z - u_extent.x) + u_extent.x;\n  }\n  float normalizedY = ((iy + 1.0) / 2.0) * (u_extent.a - u_extent.y) + u_extent.y;\n  vec2 texCoords = getTextureCoord(normalizedX, normalizedY);\n  vec4 texel = texture(u_texture, texCoords);\n  ox = ix + ((texel.r) * 2.0 - 1.0) * speed;\n  oy = iy + ((texel.g) * 2.0 - 1.0) * speed;\n  oColor = vec3(texel.r, texel.g, texel.b);\n  if (iLife > 400.0 || ox < -1.0 || ox > 1.0 || oy < -1.0 || oy > 1.0) {\n    float randValX = random(vec2(ix, iy)) * 2.0 - 1.0;\n    float randValY = random(vec2(iy, ix)) * 2.0 - 1.0;\n    float randLife = random(vec2(randValX, randValY)) * 300.0;\n\n    ox = randValX;\n    oy = randValY;\n    oLife = randLife;\n  }\n  else {\n    oLife = iLife + 1.0;\n  }\n}","#version 300 es\nvoid main() {\n}",["ox","oy","oLife","oColor"])).current,E=Object(r.useRef)(z(m,"#version 300 es\nlayout(location = 0) in vec2 position;\nlayout(location = 1) in vec3 color;\n\nout vec3 vColor;\n\nvoid main()\n{\n  gl_Position = vec4(position, 0.0, 1.0);\n  gl_PointSize = 0.5;\n  vColor = color;\n}","#version 300 es\nprecision mediump float;\nout vec4 color;\nin vec3 vColor;\nvoid main() {\n  color = vec4(vColor, 1.0);\n}")).current,b=Object(r.useContext)(l).map,g=Object(r.useRef)(null);return Object(r.useEffect)((function(){m.useProgram(v),m.uniform1f(m.getUniformLocation(v,"u_speed"),o/100)}),[o]),Object(r.useEffect)((function(){s(M(a))}),[a]),Object(r.useEffect)((function(){if(b)return function(){g.current&&b.removeLayer(g.current)}}),[t,b,n,a,d]),Object(r.useEffect)((function(){if(b){var e=new Array(n).fill(-1).map((function(e,t){return 0===t?X(m,a,d):X(m,a)})).flatMap((function(e){return e}));m.bindVertexArray(null),m.bindBuffer(m.ARRAY_BUFFER,null);var r={vao:1,buffer:2},o=!1;!function(e,t,n,r){var a=new Image;a.onload=function(){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=a.width,n.height=a.height,o.drawImage(a,0,0),function(e,t,n){var r=e.createTexture();e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r),e.uniform1i(e.getUniformLocation(n,"u_Texture"),0)}(e,a,t),r(!0)},a.src=n}(m,v,t,(function(e){o=e}));var c=null,l=new y.a({ratio:1,projection:"EPSG:4326",canvasFunction:function(t,n,u,f){if(c&&cancelAnimationFrame(c),o){i.width=f[0],i.height=f[1],m.viewport(0,0,i.width,i.height);return function(e,t,n,r,a){e.useProgram(t);var o=[].concat(Object(R.a)(n.slice(0,a.buffer)),Object(R.a)(n.slice(a.buffer))),i=e.getAttribLocation(t,"position"),c=e.getAttribLocation(t,"color");e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE),e.clear(e.COLOR_BUFFER_BIT);for(var l=0;l<o.length;l+=2)e.bindBuffer(e.ARRAY_BUFFER,o[l]),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,24,0),e.enableVertexAttribArray(c),e.vertexAttribPointer(c,3,e.FLOAT,!1,24,12),e.drawArrays(e.POINTS,0,r),e.bindBuffer(e.ARRAY_BUFFER,null)}(m,E,e,a,r),function(e,t,n,r,a,o){t.useProgram(e),t.enable(t.RASTERIZER_DISCARD);var i=t.getUniformLocation(e,"u_extent");t.bindBuffer(t.TRANSFORM_FEEDBACK_BUFFER,null);var c=[I(a[0])/180,a[1]/90,I(a[2])/180,a[3]/90].map(U);t.bindBuffer(t.TRANSFORM_FEEDBACK_BUFFER,null),t.uniform4fv(i,c),t.bindVertexArray(o[n.vao]),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,0,o[n.buffer]),t.beginTransformFeedback(t.POINTS),t.drawArrays(t.POINTS,0,r),t.endTransformFeedback(),t.bindVertexArray(null),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,0,null),n.vao=n.vao+2>=o.length?1:n.vao+2,n.buffer=n.buffer+2>=o.length?0:n.buffer+2,t.disable(t.RASTERIZER_DISCARD)}(v,m,r,a,t,e),c=requestAnimationFrame((function(){l.changed()})),i}c=requestAnimationFrame((function(){l.changed()}))}}),u=new F.a({source:l});g.current=u,b.addLayer(u)}}),[b,t,d,n,a]),null},Y=[L.a,w.a,N.a],k=function(){var e=Object(r.useState)(D.center),t=Object(c.a)(e,2),n=t[0],o=(t[1],Object(r.useState)(1)),i=Object(c.a)(o,2),l=i[0],u=(i[1],Object(r.useState)(2)),f=Object(c.a)(u,2),s=f[0],m=f[1],v=Object(r.useState)(20),g=Object(c.a)(v,2),h=g[0],x=g[1],A=Object(r.useState)(30),p=Object(c.a)(A,2),_=p[0],y=p[1],R=Object(r.useState)(2e4),S=Object(c.a)(R,2),O=S[0],T=S[1],F=Object(r.useState)(null),C=Object(c.a)(F,2),j=C[0],w=C[1],B=Object(r.useState)(L.a),N=Object(c.a)(B,2),I=N[0],U=N[1];return Object(r.useEffect)((function(){!function(e,t){var n=new Image,r=[];n.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d");e.width=n.width,e.height=n.height,a.drawImage(n,0,0);for(var o=a.getImageData(0,0,e.width,e.height),i=o.data,c=0;c<i.length;c+=4)r.push({r:i[c],g:i[c+1],b:i[c+2]});var l=r.reduce((function(e,t,n,r){return n%o.width===0&&e.push(r.slice(n,n+o.width)),e}),[]).reverse();t(l)},n.src=e}(I,(function(e){w(e)}))}),[I]),a.a.createElement("div",null,a.a.createElement(E,{center:Object(d.e)(n),zoom:l},a.a.createElement(b,null,j&&1===s?a.a.createElement(P,{vectorsData:j}):null,2===s&&a.a.createElement(V,{particlesNumber:O,src:I,trailLength:h,speed:_}))),a.a.createElement("div",null,a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Version:"),a.a.createElement("div",null,a.a.createElement("input",{onChange:function(e){x(Number(e.target.value))},type:"range",id:"trail length",name:"trail length",min:2,max:50,value:h}),a.a.createElement("label",{htmlFor:"trail length"},"Trail Length ",h)),a.a.createElement("div",null,a.a.createElement("input",{onChange:function(e){T(Number(e.target.value))},type:"range",id:"Particles number",name:"Particles number",min:5e3,max:1e5,value:O}),a.a.createElement("label",{htmlFor:"Particles number"},"Particles number ",O)),a.a.createElement("div",null,a.a.createElement("input",{onChange:function(e){y(Number(e.target.value))},type:"range",id:"Speed",name:"Speed",min:1,max:100,value:_}),a.a.createElement("label",{htmlFor:"Particles number"},"Speed ",_)))),a.a.createElement("div",null,a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Version:"),a.a.createElement("div",null,a.a.createElement("input",{onChange:function(){return m(1)},type:"radio",id:"huey",name:"drone",value:1,checked:1===s}),a.a.createElement("label",{htmlFor:"huey"},"PlainJS")),a.a.createElement("div",null,a.a.createElement("input",{onChange:function(){return m(2)},type:"radio",id:"dewey",name:"drone",value:"dewey",checked:2===s}),a.a.createElement("label",{htmlFor:"dewey"},"TransformFeedback"))),a.a.createElement("div",null,"Choose image"),Y.map((function(e){return a.a.createElement("div",{onClick:function(){U(e)},style:{background:e===I?"red":"blue"},key:e},e)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,n){e.exports=n.p+"static/media/2016112000.3a65a12c.png"},88:function(e,t,n){e.exports=n.p+"static/media/2016112118.5acbc219.png"},89:function(e,t,n){e.exports=n.p+"static/media/2016112106.d92cb4ab.png"},90:function(e){e.exports=JSON.parse('{"center":[-94.9065,38.9884],"geojsonObject":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"kind":"county","name":"Wyandotte","state":"KS"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-94.8627,39.202],[-94.901,39.202],[-94.9065,38.9884],[-94.8682,39.0596],[-94.6053,39.0432],[-94.6053,39.1144],[-94.5998,39.1582],[-94.7422,39.1691],[-94.7751,39.202],[-94.8627,39.202]]]]}}]},"geojsonObject2":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"kind":"county","name":"Johnson","state":"KS"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-94.9065,38.9884],[-95.0544,38.9829],[-95.0544,38.7365],[-94.9668,38.7365],[-94.6108,38.7365],[-94.6108,38.846],[-94.6053,39.0432],[-94.8682,39.0596],[-94.9065,38.9884]]]]}}]},"kansasCityLonLat":[-94.579228,39.135386],"blueSpringsLonLat":[-94.279851,39.03412],"markerImage24":"https://cdn2.iconfinder.com/data/icons/social-media-and-payment/64/-47-24.png","markerImage32":"https://cdn2.iconfinder.com/data/icons/social-media-and-payment/64/-47-32.png","markerImage64":"https://cdn2.iconfinder.com/data/icons/social-media-and-payment/64/-47-64.png"}')},94:function(e,t,n){e.exports=n(102)},99:function(e,t,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.fb5750d7.chunk.js.map